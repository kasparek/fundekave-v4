/*
 * FilePondPluginFileEncode 1.0.5
 * Licensed under MIT, https://opensource.org/licenses/MIT
 * Please visit https://pqina.nl/filepond for details.
 */
const DataURIWorker=function(){self.onmessage=(t=>{e(t.data.message,e=>{self.postMessage({id:t.data.id,message:e})})});const e=(e,t)=>{const{file:a}=e,i=new FileReader;i.onloadend=(()=>{t(i.result.replace("data:","").replace(/^.+,/,""))}),i.readAsDataURL(a)}};var plugin$1=({addFilter:e,utils:t})=>{const{Type:a,createWorker:i,createRoute:s,isFile:n}=t;return e("SHOULD_PREPARE_OUTPUT",e=>new Promise((e,t)=>{e(!0)})),e("COMPLETE_PREPARE_OUTPUT",(e,{item:t})=>new Promise((a,s)=>{if(!n(e))return void a(e);delete t.getMetadata().base64;i(DataURIWorker).post({file:e},i=>{t.setMetadata("base64",i),a(e)})})),e("CREATE_VIEW",e=>{const{is:t,view:a,query:i}=e;t("file-wrapper")&&i("GET_ALLOW_FILE_ENCODE")&&a.registerWriter(s({DID_LOAD_ITEM:({root:e,action:t})=>{if(i("IS_ASYNC"))return;const a=i("GET_ITEM",t.id),s=a.getMetadata(),n=s.base64;delete s.base64,e.ref.data.value=JSON.stringify({id:a.id,name:a.file.name,type:a.file.type,size:a.file.size,metadata:s,data:n})}}))}),{options:{allowFileEncode:[!0,a.BOOLEAN]}}};"undefined"!=typeof navigator&&document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:plugin$1}));export default plugin$1;