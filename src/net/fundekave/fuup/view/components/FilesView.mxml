<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" 
		  height="100%" width="100%" 
    	  creationComplete="{init()}">
    	  <mx:Script>
    	  	<![CDATA[
   	  		import mx.controls.Image;
    	  	
    	  	public static const SETTINGS_CHANGE:String = 'settingsChange';
    	  	
    	  	public static const ACTION_PROCESS:String = 'actionProcess';
    	  	public static const ACTION_UPLOAD:String = 'actionUpload';
    	  	
    	  	private function init():void {
    
    	  	}
    	  	
    	  	private var fileRefList:FileReferenceList
			private function browseFiles():void {
				fileRefList = new FileReferenceList();
				fileRefList.addEventListener(Event.SELECT, onFilesSelect );
				fileRefList.browse([new FileFilter("Images [jpg,gif,png]", "*.jpg;*.gif;*.png")]);
			}
			private function onFilesSelect(e:Event):void {
				var filesArr:Array = (e.target as FileReferenceList).fileList;
				if(filesArr.length > 0) {
					var fileView:FileView
					for each(var file:FileReference in  filesArr) {
						fileView = new FileView();
						filesBox.addChild( fileView );
						fileView.file = file;
					}
				}
			}

    	  	
    
 	
			private function doAction(actionStr:String):void {
				
				dispatchEvent( new Event( actionStr ));
			}
			

    	  	]]>
    	  </mx:Script>
    <mx:Canvas width="100%" height="50">
    	<mx:VBox verticalAlign="middle" left="5" verticalGap="0" verticalCenter="0">
    		<mx:HBox horizontalGap="5" verticalAlign="middle">
    			<mx:Label text="Select files:" />
    			<mx:Button id="selectFilesButt" click="{browseFiles()}" label="Browse" />
    		</mx:HBox>
    		<mx:HBox horizontalGap="5" verticalAlign="middle">
    			<mx:Label text="Max size:" />
    			<mx:Label text="Width" />
				<mx:TextInput id="newWidthInput" change="{dispatchEvent(new Event(SETTINGS_CHANGE))}" restrict="[0-9]" text="700" width="40" height="17" borderStyle="none" />
				<mx:Label text="Height" />
				<mx:TextInput id="newHeightInput" change="{dispatchEvent(new Event(SETTINGS_CHANGE))}" restrict="[0-9]" text="700" width="40" height="17" borderStyle="none" />
			</mx:HBox>
    	</mx:VBox>
    	<mx:VBox right="5" verticalCenter="0">
    		<mx:Button id="processButt" click="{doAction(ACTION_PROCESS)}" label="Process" height="20"  />
    		<mx:Button id="uploadButt" click="{doAction(ACTION_UPLOAD)}" label="Upload" height="20" />
    	</mx:VBox>
    	
    </mx:Canvas>
    <mx:Canvas top="50" 
		left="0" right="0" 
		bottom="0"
		horizontalScrollPolicy="off">
		<mx:VBox id="filesBox" mouseChildren="true"
			borderStyle="solid" 
			backgroundColor="0x000000" 
			backgroundAlpha="1"
			width="100%"
			height="100%"
			paddingBottom="5" paddingLeft="5" paddingRight="5" paddingTop="5"
		>
		</mx:VBox>
	</mx:Canvas>
</mx:Canvas>
