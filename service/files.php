<?php
$data = $_POST['data'];
if(!empty($data)) {
//$data = '<data><chunk seq="2" to="12">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</chunk></data>';

$dataXML = new SimpleXMLElement($data);

file_put_contents('chunk'.$dataXML->chunk['seq'].'.txt',$dataXML->chunk);


$total = $dataXML->chunk['to'];
} else {
$total = 1;
}
$allExists = true; 
for($i=0;$i<$total;$i++) {
if(!file_exists('chunk'.$i.'.txt'))  {
$allExists = false;
}
}


if($allExists === true) {
	//--concat all files
	$encData = '';
	for($i=0;$i<$total;$i++) {
		$encData .= trim(file_get_contents('chunk'.$i.'.txt'));
		unlink('chunk'.$i.'.txt');
	}
	$jpgData = base64_decode( $encData );
	var_dump(base64_decode( $encData ));
	file_put_contents('file.jpg',base64_decode( $encData ));
}